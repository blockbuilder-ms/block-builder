<?php
$fonts = \BB\Plugins\Typography\Includes\Google\Fonts::all();
$typographyItems = [
    "h1" => [
        "label" => "Header 1",
        "name" => "header-1",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-one-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-one-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-one-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-one-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-one-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-one-letter-spacing",
            ],
        ],
    ],
    "h2" => [
        "label" => "Header 2",
        "name" => "header-2",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-two-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-two-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-two-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-two-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-two-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-two-letter-spacing",
            ],
        ],
    ],
    "h3" => [
        "label" => "Header 3",
        "name" => "header-3",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-three-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-three-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-three-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-three-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-three-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-three-letter-spacing",
            ],
        ],
    ],
    "h4" => [
        "label" => "Header 4",
        "name" => "header-4",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-four-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-four-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-four-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-four-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-four-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-four-letter-spacing",
            ],
        ],
    ],
    "h5" => [
        "label" => "Header 5",
        "name" => "header-5",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-five-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-five-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-five-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-five-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-five-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-five-letter-spacing",
            ],
        ],
    ],
    "h6" => [
        "label" => "Header 6",
        "name" => "header-6",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "header-six-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "header-six-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "header-six-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "header-six-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "header-six-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "header-six-letter-spacing",
            ],
        ],
    ],
    "p" => [
        "label" => "Paragraph",
        "name" => "paragraph",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "paragraph-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "paragraph-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "paragraph-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "paragraph-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "paragraph-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "paragraph-letter-spacing",
            ],
        ]
    ],
    "a" => [
        "label" => "Links",
        "name" => "a",
        "items" => [
            [
                "label" => "Font Family",
                "type" => "font-picker",
                "name" => "paragraph-font-family",
            ],
            [
                "label" => "Font Weight",
                "type" => "select",
                "name" => "paragraph-font-weight",
            ],
            [
                "label" => "Font Style",
                "type" => "select",
                "name" => "paragraph-font-style",
            ],
            [
                "label" => "Font Size",
                "type" => "dimension",
                "name" => "paragraph-font-size",
            ],
            [
                "label" => "Line Height",
                "type" => "dimension",
                "name" => "paragraph-line-height",
            ],
            [
                "label" => "Letter Spacing",
                "type" => "dimension",
                "name" => "paragraph-letter-spacing",
            ],
        ]
    ],
]
?>
<div class="accordion-toggle w-full mb-4">
    <a x-action="accordion-toggle" x-options='{ "fullPage": true }' href="#typography-setup" class="accordion-header text-decoration-none justify-between items-center content-center flex py-4 px-4 bg-white mx-4 text-sm">
        <span>Typography Setup</span>
        <svg xmlns="http://www.w3.org/2000/svg" style="height:16px;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
    </a>

    <div id="typography-setup" class="accordion-content relative hidden opacity-0 transition-all duration-200 ease-in-out">
        <div class="flex justify-between items-center content-center">
            <div class="flex items-center content-center left">
                <a x-back title="Click to go back" class="cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" style="height:24px;" class="mx-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                    </svg>
                </a>
                <h2>Typography</h2>
            </div>

            <div class="flex items-center content-center right">
                <div class="mx-4">
                    <input type="search" name="s" class="search-input py-2 px-4 text-sm" placeholder="Search by label">
                </div>
            </div>
        </div>
        <?php
        foreach ($typographyItems as $item) :
        ?>
            <div x-action="toggle" class="form-group bg-white rounded px-4 py-4 flex flex-wrap mb-2">
                <div class="w-full">
                    <a x-toggle class="flex cursor-pointer justify-between items-center w-full text-sm">
                        <span><?php echo $item['label'] ?></span>
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" style="width:14px;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122" />
                            </svg>
                        </span>
                    </a>
                    <div x-container class="toggle-container hidden opacity-0 scale-95 duration-200 ease-in-out transition-all flex flex-wrap mt-1">
                        <?php
                        foreach ($item['items'] as $innerItem) :
                            switch ($innerItem['type']):
                                case "select":
                        ?>
                                    <div id="font-weight" class="flex flex-wrap w-full form-group mb-4">
                                        <div class="inner w-full">
                                            <label class="text-xs w-full flex items-center content-center">
                                                <span class="mr-2 opacity-50 hover:opacity-100 cursor-pointer">
                                                    <svg xmlns="http://www.w3.org/2000/svg" style="width:14px;" viewBox="0 0 20 20" fill="currentColor">
                                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                                                    </svg>
                                                </span>
                                                <span><?php echo $innerItem['label'] ?></span>
                                            </label>
                                            <select class="w-full mt-1 py-2 px-4 capitalize" name="<?php echo $innerItem['name'] ?>"></select>
                                        </div>
                                    </div>
                                <?php
                                    break;

                                case "dimension":
                                ?>
                                    <div class="form-group flex flex-wrap w-full mb-4">
                                        <label class="text-xs w-full flex items-center content-center">
                                            <span class="mr-2 opacity-50 hover:opacity-100 cursor-pointer">
                                                <svg xmlns="http://www.w3.org/2000/svg" style="width:14px;" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                                                </svg>
                                            </span>
                                            <span><?php echo $innerItem['label'] ?></span>
                                        </label>
                                        <div class="dimension flex justify-between w-full">
                                            <span class="flex col-10 first">
                                                <input class="w-full mt-1 py-2 px-4" type="number" name="<?php echo $innerItem['name'] ?>" />
                                            </span>
                                            <span class="flex col-2 last">
                                                <select class="w-full mt-1 py-2 capitalize" name="<?php echo $innerItem['name'] ?>-extension">
                                                    <option name="px">Px</option>
                                                    <option name="%">%</option>
                                                    <option name="rem">rem</option>
                                                    <option name="em">em</option>
                                                </select>
                                            </span>
                                        </div>
                                    </div>
                                <?php
                                    break;

                                case "font-picker":
                                ?>
                                    <div id="<?php echo $innerItem['name'] ?>" class="form-group w-full mb-4">
                                        <label>Font Family</label>
                                        <div class="flex justify-between items-center content-center w-full mt-1">
                                            <span class="flex items-center text-sm">Current font family</span>
                                            <button x-action="font-picker" class="button button-primary border-0 font-picker flex flex-wrap py-1 px-4 bg-primary cursor-pointer text-white">
                                                Pick
                                            </button>
                                        </div>

                                        <div class="font-picker-modal z-50 opacity-0 hidden duration-200 ease-in-out transition-opacity absolute top-0 left-0 flex flex-wrap items-start content-start bg-white w-full h-full">
                                            <div class="px-4 py-4 w-full">
                                                <div class="flex justify-between items-center">
                                                    <h4 class="w-full mb-0 mt-0">Available Fonts</h4>
                                                    <a x-close title="Click to close the font picker window." class="cursor-pointer">
                                                        <svg xmlns=" http://www.w3.org/2000/svg" style="width:14px;" viewBox="0 0 20 20" fill="currentColor">
                                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                        </svg>
                                                    </a>
                                                </div>
                                                <div class="font-search w-full flex mt-1">
                                                    <input x-search type="search" name="font-search" class="w-full px-2 py-2 border outline-none" placeholder="Search for the font" />
                                                </div>

                                                <div class="font-picker-container flex flex-wrap w-full items-start content-start font-container">
                                                    <?php
                                                    if (isset($fonts) && is_array($fonts) && 0 !== count($fonts)) :
                                                        foreach ($fonts as $k => $font) :
                                                            $mode = 'even';

                                                            if ($k & 1) {
                                                                $mode = 'odd';
                                                            }
                                                    ?>
                                                            <div x-key="<?php echo strtolower($font['family']) ?>" class="flex justify-between items-center w-full py-1 bg-extra-<?php echo $mode === 'even' ? '1' : '2' ?> px-4">
                                                                <span class="font-title"><?php echo $font['family'] ?></span>
                                                                <span class="font-pick">
                                                                    <button x-add x-font="<?php echo $font['family'] ?>" class="primary-button cursor-pointer">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" style="width:14px;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                                                                        </svg>
                                                                    </button>
                                                                </span>
                                                            </div>
                                                        <?php
                                                        endforeach;
                                                    else :
                                                        ?>
                                                        <div class="text-sm px-2">
                                                            <p class="mt-0 mb-0">We were unable to fetch any fonts.</p>
                                                            <p class="mt-0 mb-0">Please check your Api key.</p>
                                                        </div>
                                                    <?php
                                                    endif;
                                                    ?>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                        <?php
                                    break;

                                default:
                            endswitch;
                        endforeach;
                        ?>
                    </div>
                </div>
            </div>
        <?php
        endforeach;
        ?>
    </div>
</div>